\chapter{PREDICATE LOGIC}

Keywords: \hl{Prop}, CH, \textit{witnessed}, \textit{proof}, \textit{certificate}, \textit{inhabited}, \textit{uninhabited}, \textit{introduction rule}, \textit{elimination rule}

\hl{Prop} is an object at level 1 which is the same level with \hl{Nat}. An element (level 0) of universe \hl{Prop} is called a proposition. For example, \hl{True}, \hl{1 + 1 = 3}, \hl{Fermat's last theorem}.

Curry–Howard (CH) \cite{CH} asserts that proving a proposition \hl{p: Prop} is equivalent to constructing an element \hl{x: p} at level -1. Hence, a proposition \hl{p: Prop} is said to be true if and only if there exists an element  \hl{x: p} at level -1, we say that the truth of \hl{p: Prop} is \textit{witnessed} by \textit{proof} \hl{x: p} or \hl{x: p} is a \textit{certificate} for the truth of \hl{p: Prop}.

We say \hl{p: Prop} is \textit{inhabited} if there is a proof for \hl{p: Prop}, \hl{p: Prop} is \textit{uninhabited} if there is no proof for \hl{p: Prop}

The type system in lean is powerful enough to model predicate logic, we will describe below the builtin logical connectives and related \textit{introduction rules} and \textit{elimination rules}. An introduction rule is a way to prove \hl{p: Prop} from something else, an elimination rule is a way deduce something else from \hl{p: Prop}

\section{TRUE}

\hl{True: Prop} is a proposition.

\begin{itemize}
	\item \hl{True} admits one introduction rule: \hl{True.intro: True} (also written as \hl{trivial: True})
	
	\item \hl{True} admits no elimination rule, that is, one cannot use \hl{True} to prove anything
\end{itemize}


\section{FALSE}

\hl{False: Prop} is a proposition in lean.

\begin{itemize}
	\item \hl{False} admits no introduction rule, that is one cannot prove \hl{False}
	
	\item \hl{False} admits one elimination rule: \hl{False.elim}
	
	that is, one can prove everything from \hl{False}. Let \hl{q: Prop} be a proposition, then \hl{False.elim q: q} is a proof
\end{itemize}



\section{IMPLICATION $\to$}

Let \hl{p: Prop} and \hl{q: Prop} be propositions and \hl{f: p $\to$ q} be a map. If \hl{hp: p} is a proof, then \hl{f hp: q} is also a proof. This is known as \textit{modus ponens} or implication elimination rule. In lean, \hl{p $\to$ q: Prop} is a proposition. The introduction rules and elimination rules are then obvious from the context.

\section{CONJUNCTION $\land$}

Let \hl{p: Prop} and \hl{q: Prop} be propositions, then \hl{p $\land$ q: Prop} is a proposition (also written as \hl{And p q} or \hl{p $\times$ q})

\begin{itemize}
	\item \hl{And} admits an and-introduction rule: \hl{And.intro}
	
	Let \hl{hp: p} and \hl{hq: q} be a proofs, then \hl{And.intro hp hq: p $\land$ q} is also a proof
	
	\item \hl{And} admits two and-elimination rules: \hl{And.left} and \hl{And.right}
	
	Let \hl{h: p $\land$ q} be a proof, then \hl{And.left h: p} and \hl{And.right h: q} are also proofs (also written as \hl{h.left} and \hl{h.right})
	
	
\end{itemize}


\section{DISJUNCTION $\lor$}

Let \hl{p: Prop} and \hl{q: Prop} be propositions, then \hl{p $\lor$ q: Prop} is a proposition (also written as \hl{Or p q} or \hl{p $\oplus$ q})

\begin{itemize}
	\item \hl{Or} admits two or-introduction rules: \hl{Or.intro\_left}, \hl{Or.intro\_right}
	
	Let \hl{hp: p} be a proof, then \hl{Or.intro\_left q hp: p $\lor$ q} is also a proof (also written as \hl{Or.inl hp})
	
	Let \hl{hq: q} be a proof, then \hl{Or.intro\_right p hq: p $\lor$ q} is also a proof (also written as \hl{Or.inr hq})
	
	\item \hl{Or} admits one or-elimination rule: \hl{Or.elim}
	
	Let \hl{hpq: p $\lor$ q}, \hl{hpr: p $\to$ r}, and \hl{hqr: q $\to$ r} be proofs, then \hl{Or.elim hpq hpr hqr: r} is also a proof
\end{itemize}


\section{NEGATION $\lnot$}

Given a proposition \hl{p: Prop}, \hl{$\lnot$ p} is a propositon (also written as \hl{Not p}). \hl{$\lnot$ p} is precisely \hl{p $\to$ False}

\section{LOGICAL EQUIVALENCE $\leftrightarrow$}

Given two propositions \hl{p: Prop} and \hl{q: Prop}, \hl{p $\leftrightarrow$ q: Prop} is a proposition (also written as \hl{Iff p q})

\begin{itemize}
	\item \hl{Iff} admits an iff-introduction rule: \hl{Iff.intro}
	
	Let \hl{hpq: p $\to$ q} and \hl{hqp: q $\to$ p} be proofs, then  \hl{Iff.intro hpq hqp: p $\leftrightarrow$ q} is also a proof
	
	\item \hl{Iff} admits two iff-elimination rules: \hl{Iff.mp}, \hl{Iff.mpr}
	
	
	Let \hl{h: p $\leftrightarrow$ q} be a proof, then \hl{Iff.mp h: p $\to$ q} and \hl{Iff.mpr h: q $\to$ p} are also proofs
\end{itemize}

\section{UNIVERSAL QUANTIFIER $\forall$}

Let \hl{$\alpha$} be any object and \hl{p: $\alpha \to$ Prop} be a map, then \hl{$\forall$ x: $\alpha$, p x} is a proposition. An element of \hl{$\forall$ x: $\alpha$, p x} is of the form \hl{hpx \{x : $\alpha$\} : $\alpha$ → p x}, that is a function mapping \hl{x: $\alpha$} into a proof for \hl{p x}. The introduction rules and elimination rules are then obvious from the context.

\section{EXISTENTIAL QUANTIFIER $\exists$}

Let \hl{$\alpha$} be any object and \hl{p: $\alpha \to$ Prop} be a map, then \hl{$\exists$ x: $\alpha$, p x} is a proposition.

\begin{itemize}
	\item \hl{Exists} admits one introduction rule: \hl{Exists.intro}
	
	Let \hl{x : $\alpha$} be an element and \hl{hpx: p x} be a proof, then \hl{Exists.intro x hpx: ($\exists$ x: $\alpha$, p x)} is also a proof
	
	\item \hl{Exists} admits one elimination rule: \hl{Exists.elim}
	
	Let \hl{hp: ($\exists$ x: $\alpha$, p x)} and \hl{hpq: ($\forall$ y: $\alpha$, p y $\to$ q)} be proofs, then \hl{Exists.elim hp hpq: q} is a proof 
\end{itemize}

\section{CLASSICAL LOGIC}

So far, we introduced constructive logic, that is, if a proposition is true, then we are able to construct a certificate. However, it will be useful if we accept non-constructive proof, that is, assuming law of excluded middle: for any proposition \hl{p: Prop}, \hl{p $\lor \lnot$ p} is true. In lean, we can obtain a proof for \hl{p $\lor \lnot$ p} from \hl{Classical.em p}. Law of excluded middle also induces the principal of double-negation elimination: for any proposition \hl{p: Prop}, \hl{$\lnot \lnot$ p $\leftrightarrow$ p}. With the principal of double-negation elimination, one is able to carry out proof by contradiction, which is generally not possible in constructive logic. 

\section{AUXILIARY SUBGOALS}


when writing lean proof, one can use \hl{have <object>: <type> := <value>} (same semantic ot \hl{let}) and \hl{show <proposition> from <proof>} so that the proof is easier to read for human.

\begin{lstlisting}
	-- subgoal
	example (h : p ∧ q) : q ∧ p :=
	have hp : p := h.left -- same as `let hp := And.left h`
	have hq : q := h.right
	show q ∧ p from And.intro hq hp
	
	-- subgoal
	example (h : p ∧ q) : q ∧ p :=
	have hp : p := h.left
	-- it suffices to show hq: q because we can show q ∧ p from two certificates hq and hp
	suffices hq : q from And.intro hq hp
	show q from And.right h
\end{lstlisting}

